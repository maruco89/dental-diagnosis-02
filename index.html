<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="æ­¯ç§‘åŒ»é™¢ã®æ¡ç”¨åŠ›ã‚’8ã¤ã®è³ªå•ã§è¨ºæ–­ã€‚æ¡ç”¨æ´»å‹•ã®èª²é¡Œã‚’è¦‹ãˆã‚‹åŒ–ã—ã€æ”¹å–„ãƒã‚¤ãƒ³ãƒˆã‚’å…·ä½“çš„ã«ææ¡ˆã—ã¾ã™ã€‚">
  <meta name="keywords" content="æ­¯ç§‘åŒ»é™¢,æ¡ç”¨,è¨ºæ–­,æ±‚äºº,äººæ,choista">
  
  <!-- OGPè¨­å®š -->
  <meta property="og:title" content="æ­¯ç§‘åŒ»é™¢å‘ã‘æ¡ç”¨åŠ›ç°¡æ˜“è¨ºæ–­ | choista">
  <meta property="og:description" content="8ã¤ã®è³ªå•ã§ã‚ãªãŸã®åŒ»é™¢ã®æ¡ç”¨åŠ›ã‚’è¨ºæ–­ã€‚æ”¹å–„ãƒã‚¤ãƒ³ãƒˆã‚’å…·ä½“çš„ã«ææ¡ˆã—ã¾ã™ã€‚">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://example.com/ogp-image.jpg">
  <meta name="twitter:card" content="summary_large_image">
  
  <title>æ­¯ç§‘åŒ»é™¢å‘ã‘æ¡ç”¨åŠ›ç°¡æ˜“è¨ºæ–­ | choista</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  
  <style>
    /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾© */
    @keyframes fadeIn {
      from { 
        opacity: 0; 
        transform: translateY(20px); 
      }
      to { 
        opacity: 1; 
        transform: translateY(0); 
      }
    }
    
    @keyframes slideInFromLeft {
      from {
        opacity: 0;
        transform: translateX(-30px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    @keyframes scaleIn {
      from {
        opacity: 0;
        transform: scale(0.9);
      }
      to {
        opacity: 1;
        transform: scale(1);
      }
    }
    
    @keyframes pulse {
      0%, 100% {
        transform: scale(1);
      }
      50% {
        transform: scale(1.05);
      }
    }
    
    @keyframes shimmer {
      0% {
        background-position: -1000px 0;
      }
      100% {
        background-position: 1000px 0;
      }
    }
    
    .animate-fadeIn { 
      animation: fadeIn 0.5s ease-out forwards;
    }
    
    .animate-slideIn {
      animation: slideInFromLeft 0.5s ease-out forwards;
    }
    
    .animate-scaleIn {
      animation: scaleIn 0.4s ease-out forwards;
    }
    
    .animate-pulse-slow {
      animation: pulse 2s ease-in-out infinite;
    }
    
    /* ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ« */
    body { 
      color: #272727;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    }
    
    /* ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
    html {
      scroll-behavior: smooth;
    }
    
    /* ãƒœã‚¿ãƒ³ãƒ›ãƒãƒ¼åŠ¹æœå¼·åŒ– */
    .btn-primary {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    
    .btn-primary::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s ease;
    }
    
    .btn-primary:hover::before {
      left: 100%;
    }
    
    /* ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
    .progress-bar {
      transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    /* ã‚«ãƒ¼ãƒ‰å½±åŠ¹æœ */
    .card-shadow {
      box-shadow: 0 10px 40px rgba(60, 166, 255, 0.1);
      transition: box-shadow 0.3s ease;
    }
    
    .card-shadow:hover {
      box-shadow: 0 15px 50px rgba(60, 166, 255, 0.2);
    }
    
    /* ã‚¹ã‚¿ãƒ¼è©•ä¾¡ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
    .star-rating span {
      display: inline-block;
      animation: scaleIn 0.3s ease-out forwards;
      animation-delay: calc(var(--index) * 0.1s);
      opacity: 0;
    }
    
    /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¹ãƒ”ãƒŠãƒ¼ */
    .spinner {
      border: 3px solid rgba(60, 166, 255, 0.1);
      border-top-color: #3ca6ff;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 0.8s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–iframe */
    .iframe-container {
      position: relative;
      width: 100%;
      padding-bottom: 56.25%; /* 16:9 ratio */
      height: 0;
      overflow: hidden;
    }
    
    .iframe-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
    }
    
    /* ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯è¦–åŒ–ï¼ˆã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ï¼‰ */
    button:focus-visible,
    a:focus-visible {
      outline: 3px solid #3ca6ff;
      outline-offset: 2px;
    }
    
    /* ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼ç”¨ */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border-width: 0;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-white to-yellow-50 min-h-screen">
  <!-- ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ -->
  <div id="app" role="main"></div>
  
  <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º -->
  <div id="loading" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
    <div class="spinner"></div>
  </div>

  <script>
    // =========================
    // ãƒ‡ãƒ¼ã‚¿å®šç¾©
    // =========================
    const QUESTIONS = [
      {
        id: 1,
        category: 'ã‚³ã‚¹ãƒˆ',
        question: '1å¹´é–“ã®æ¡ç”¨æ´»å‹•è²»ã‚’ã€å°†æ¥çš„ã«æƒ…å ±ãŒæ®‹ã‚‹LPã§ã¯ãªãã€æµã‚Œã¦æ¶ˆãˆã‚‹æ±‚äººåª’ä½“ã«ä¸»ã«æŠ•ä¸‹ã—ã¦ã„ã¾ã™ã‹?',
        issueTrigger: 'NO',
        solution: {
          title: 'å¿œå‹Ÿå˜ä¾¡ã®æ”¹å–„ã¨è³‡ç”£åŒ–',
          description: 'æ±‚äººåª’ä½“ã«ä¾å­˜ã›ãšã€LPã‚’æ¡ç”¨ã®è³‡ç”£ã¨ã—ã¦æ´»ç”¨ã§ãã¾ã™ã€‚\nCVRã®é«˜ã„LPã§è²»ç”¨å¯¾åŠ¹æœã‚’æœ€å¤§åŒ–ã€‚'
        }
      },
      {
        id: 2,
        category: 'ã‚¹ãƒ”ãƒ¼ãƒ‰',
        question: 'è¦‹å­¦ãƒ»é¢æ¥å¾Œã«ã€å¿œå‹Ÿè€…ã‹ã‚‰ã®è³ªå•ã‚„ç–‘å•ã«è¿…é€Ÿã«å›ç­”ã™ã‚‹ãŸã‚ã®FAQã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’äº‹å‰ã«ç”¨æ„ã—ã¦ã„ã¾ã™ã‹?',
        issueTrigger: 'NO',
        solution: {
          title: 'é¸è€ƒãƒ—ãƒ­ã‚»ã‚¹å‰ã®é›¢è„±é˜²æ­¢',
          description: 'LPä¸Šã§3Dè¦‹å­¦ã‚’å…¬é–‹ã—ã€é¢æ¥ã§ã®è³ªå•ã‚’æ¸›ã‚‰ã™ã“ã¨ã§é¸è€ƒã‚¹ãƒ”ãƒ¼ãƒ‰å‘ä¸Šã«å¯„ä¸ã—ã¾ã™ã€‚'
        }
      },
      {
        id: 3,
        category: 'é­…åŠ›åº¦',
        question: 'åŒ»é™¢ã®åƒãé­…åŠ›ã‚„æ•™è‚²åˆ¶åº¦ã‚’ã€é™¢é•·å…ˆç”Ÿã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã ã‘ã§ãªãã€ç¾å½¹ã‚¹ã‚¿ãƒƒãƒ•ã«ã‚ˆã‚‹ã‚¤ãƒ³ã‚¿ãƒ“ãƒ¥ãƒ¼è¨˜äº‹ã‚„å‹•ç”»ã§å…¬é–‹ã—ã¦ã„ã¾ã™ã‹ï¼Ÿ',
        issueTrigger: 'NO',
        solution: {
          title: 'è¨´æ±‚åŠ›ã®æœ€å¤§åŒ–ã¨ãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°',
          description: 'æ¡ç”¨LPã¨3Dè¦‹å­¦ã§è·å ´ã®é­…åŠ›ã‚’å…·ä½“çš„ã«ä¼ãˆã€åŒ»é™¢ãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã‚’å¼·åŒ–ã—ã¾ã™ã€‚'
        }
      },
      {
        id: 4,
        category: 'å®šç€ç‡',
        question: 'æ¡ç”¨æ™‚ã«æ±‚ã‚ã‚‹äººæåƒã‚„ä¾¡å€¤è¦³ãŒå…·ä½“çš„ã«è¨€èªåŒ–ãƒ»æ–‡æ›¸åŒ–ã•ã‚Œã€ã‚¹ã‚¿ãƒƒãƒ•å…¨å“¡ã«å…±æœ‰ã•ã‚Œã¦ã„ã¾ã™ã‹?',
        issueTrigger: 'NO',
        solution: {
          title: 'ãƒŸã‚¹ãƒãƒƒãƒã®è§£æ¶ˆã¨æ ¹æœ¬åŸå› ã®åˆ†æ',
          description: 'å…¥ç¤¾å‰ã®æœŸå¾…å€¤èª¿æ•´ã‚’å¾¹åº•ã—ã€LPã§æ±‚è·è€…è¡Œå‹•ã‚’åˆ†æã™ã‚‹ã“ã¨ã§æ¡ç”¨ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’æ”¹å–„ã§ãã¾ã™ã€‚'
        }
      },
      {
        id: 5,
        category: 'å¸‚å ´æ€§',
        question: 'æ±‚äººã«ã€ŒæœªçµŒé¨“ãƒ»ãƒ–ãƒ©ãƒ³ã‚¯æ­“è¿ã€ã¨æ˜è¨˜ã—ã¦ã„ãªã„ãŸã‚ã€æ½œåœ¨çš„ãªå¿œå‹Ÿè€…å±¤ã®æ¯é›†å›£å½¢æˆã«è‹¦åŠ´ã—ã¦ã„ã¾ã™ã‹?',
        issueTrigger: 'YES',
        solution: {
          title: 'æ½œåœ¨å±¤ã¸ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¨å¿œå‹Ÿä¿ƒé€²',
          description: '3Dè¦‹å­¦ã‚„åˆ¶åº¦ç´¹ä»‹ã§ä¸å®‰ã‚’è§£æ¶ˆã—ã€åºƒãå¿œå‹Ÿè€…ã‚’é›†ã‚ã‚‰ã‚Œã¾ã™ã€‚'
        }
      },
      {
        id: 6,
        category: 'ä¾¡å€¤è¦³ãƒãƒƒãƒ',
        question: 'åŒ»é™¢ã®ç†å¿µã‚„è¡Œå‹•æŒ‡é‡ãªã©ã€ã€Œåƒãä¸Šã§æœ€ã‚‚å¤§åˆ‡ã«ã—ã¦ã„ã‚‹ä¾¡å€¤è¦³ã€ã‚’ã€æ±‚äººæƒ…å ±å†…ã§æ˜ç¢ºã‹ã¤å…·ä½“çš„ã«å…¬é–‹ã—ã¦ã„ã¾ã™ã‹?',
        issueTrigger: 'NO',
        solution: {
          title: 'ãƒŸã‚¹ãƒãƒƒãƒé˜²æ­¢ã¨ä¾¡å€¤è¦³è¨´æ±‚',
          description: 'äº‹å‰ã«LPã‚„3Dè¦‹å­¦ã§åŒ»é™¢ã®ä¾¡å€¤è¦³ã‚’å¯è¦–åŒ–ã—ã€ä¾¡å€¤è¦³ã«åˆã†äººæã‚’é›†ã‚ã‚‰ã‚Œã¾ã™ã€‚'
        }
      },
      {
        id: 7,
        category: 'è©•åˆ¤ãƒ»èªçŸ¥',
        question: 'æ±‚è·è€…ãŒç¾åœ°è¦‹å­¦ã®ç”³ã—è¾¼ã¿ã‚’ã™ã‚‹å‰ã«ã€åŒ»é™¢ã®è¨­å‚™ã‚„é›°å›²æ°—ã‚’ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§ç¢ºèªã§ãã‚‹ç’°å¢ƒã‚’ç”¨æ„ã—ã¦ã„ã¾ã™ã‹?',
        issueTrigger: 'NO',
        solution: {
          title: '3Dè¦‹å­¦ã«ã‚ˆã‚‹äº‹å‰ä½“é¨“',
          description: 'ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§åŒ»é™¢ã®é›°å›²æ°—ã‚’å¯è¦–åŒ–ã—ã€è¦‹å­¦æ„æ¬²ã‚„å¿œå‹Ÿæ„æ¬²ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚'
        }
      },
      {
        id: 8,
        category: 'å¿œå‹Ÿè€…ä½“é¨“',
        question: 'ã€Œå…¥ç¤¾ã—ãªã„ç†ç”±ã€ã¨ã—ã¦ã€æƒ…å ±ä¸è¶³ã‚„åƒãã‚¤ãƒ¡ãƒ¼ã‚¸ã®ã‚®ãƒ£ãƒƒãƒ—ãŒåŸå› ã ã¨æ„Ÿã˜ãŸå¿œå‹Ÿè€…ãŒç›´è¿‘ã§ã„ã¾ã—ãŸã‹?',
        issueTrigger: 'YES',
        solution: {
          title: 'å¿œå‹Ÿè€…ä½“é¨“ã®å‘ä¸Š',
          description: 'LPã¨3Dè¦‹å­¦ã§äº‹å‰æƒ…å ±ã‚’å……å®Ÿã•ã›ã€å•ã„åˆã‚ã›ã‚„è³ªå•ã‚’æ¸›ã‚‰ã—ã¦ã‚¹ãƒ ãƒ¼ã‚ºãªé¸è€ƒä½“é¨“ã‚’æä¾›ã—ã¾ã™ã€‚'
        }
      }
    ];

    // =========================
    // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çŠ¶æ…‹ç®¡ç†
    // =========================
    class DiagnosisApp {
      constructor() {
        this.stage = 'intro';
        this.currentQuestion = 0;
        this.answers = {};
        this.startTime = null;
        this.init();
      }

      init() {
        this.render();
        this.setupErrorHandling();
        this.trackPageView();
      }

      setupErrorHandling() {
        window.addEventListener('error', (event) => {
          console.error('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:', event.error);
          this.showError('äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚');
        });
      }

      trackPageView() {
        // Google Analyticsç­‰ã®åˆ†æãƒ„ãƒ¼ãƒ«é€£æºç”¨
        if (typeof gtag !== 'undefined') {
          gtag('event', 'page_view', {
            page_title: document.title,
            page_location: window.location.href
          });
        }
      }

      showError(message) {
        alert(message);
      }

      // ã‚¹ã‚³ã‚¢è¨ˆç®—
      getScore() {
        return QUESTIONS.length - this.getIssues().length;
      }

      // èª²é¡Œãƒªã‚¹ãƒˆã®å–å¾—
      getIssues() {
        return QUESTIONS.filter((q, idx) => this.answers[idx] === q.issueTrigger);
      }

      // ã‚¹ã‚³ã‚¢è©•ä¾¡ã‚³ãƒ¡ãƒ³ãƒˆ
      getScoreComment(score) {
        if (score === 8) return 'å®Œç’§ã§ã™ï¼æ¡ç”¨åŠ›ã¯æœ€é«˜ãƒ¬ãƒ™ãƒ«';
        if (score >= 6) return 'ã‹ãªã‚Šè‰¯ã„çŠ¶æ…‹ã§ã™ãŒã€ã¾ã ä¼¸ã³ã—ã‚ãŒã‚ã‚Šã¾ã™';
        if (score >= 4) return 'å¹³å‡çš„ã€‚ã“ã“ã‹ã‚‰å·®ãŒã¤ãã¾ã™';
        if (score >= 2) return 'ã„ã¾ã®æ¡ç”¨åŠ›ã¯"å¶ç„¶é ¼ã¿"ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“';
        return 'æ¡ç”¨ã®ä»•çµ„ã¿åŒ–ãŒæ€¥å‹™ã§ã™';
      }

      // ã‚¢ãƒ‰ãƒã‚¤ã‚¹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
      getAdviceMessage(score) {
        if (score === 8) return 'ã™ã§ã«é«˜ã„æ¡ç”¨åŠ›ã‚’ãŠæŒã¡ã§ã™ï¼ã•ã‚‰ã«ç´°ã‹ã„æ”¹å–„ã§ã€ç†æƒ³ã®æ¡ç”¨æ´»å‹•ã‚’å®Ÿç¾ã§ãã¾ã™ã€‚';
        if (score >= 6) return 'ã‚ã¨ä¸€æ­©ã§æ¡ç”¨åŠ›ãŒé£›èºçš„ã«å‘ä¸Šã—ã¾ã™ï¼ç‰¹ã«æ”¹å–„ãƒã‚¤ãƒ³ãƒˆã«æ³¨åŠ›ã™ã‚Œã°ã€å¿œå‹Ÿæ•°ãƒ»è³ªã¨ã‚‚ã«å¤§ããå¤‰ã‚ã‚‹ã¯ãšã§ã™ã€‚';
        if (score >= 4) return 'ã“ã®çµæœã¯ã€ã‚ãªãŸã®æ¡ç”¨ãƒšãƒ¼ã‚¸ãŒä¼ã‚ã‚Šåˆ‡ã£ã¦ã„ãªã„å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼æ”¹å–„ãƒã‚¤ãƒ³ãƒˆã‚’1ã¤ãšã¤ã‚¯ãƒªã‚¢ã—ã¦ã„ãã¾ã—ã‚‡ã†ã€‚';
        if (score >= 2) return 'æ¡ç”¨æ´»å‹•ãŒ"å ´å½“ãŸã‚Šçš„"ã«ãªã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã§ã™ã€‚ã¾ãšã¯ä»•çµ„ã¿åŒ–ã‹ã‚‰å§‹ã‚ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚';
        return 'æ¡ç”¨ã®åŸºç›¤ãŒæ•´ã£ã¦ã„ãªã„çŠ¶æ…‹ã§ã™ã€‚ä»Šã™ãæ”¹å–„ã«ç€æ‰‹ã—ãªã„ã¨ã€è‰¯ã„äººæã¨ã®å‡ºä¼šã„ã‚’é€ƒã—ç¶šã‘ã‚‹ã“ã¨ã«ãªã‚Šã¾ã™ã€‚';
      }

      // ã‚¤ãƒ³ãƒˆãƒ­ç”»é¢
      renderIntro() {
        return `
          <div class="min-h-screen flex items-center justify-center p-4">
            <div class="max-w-2xl w-full bg-white rounded-3xl shadow-2xl p-8 md:p-12 text-center card-shadow animate-fadeIn">
              <div class="mb-8">
                <h1 class="text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-[#3ca6ff] to-[#f7e630] bg-clip-text text-transparent">
                  æ¡ç”¨åŠ›ç°¡æ˜“è¨ºæ–­
                </h1>
                <p class="text-xl text-gray-600">æ­¯ç§‘åŒ»é™¢å‘ã‘</p>
              </div>
              
              <div class="mb-8 p-6 bg-gradient-to-r from-blue-50 to-yellow-50 rounded-2xl">
                <p class="text-lg leading-relaxed mb-4">
                  ã“ã‚“ã«ã¡ã¯ï¼æ ªå¼ä¼šç¤¾SABUã®ä»£è¡¨ é½‹è—¤ã§ã™ã€‚
                </p>
                <p class="text-lg leading-relaxed">
                  ã“ã‚Œã‹ã‚‰<span class="font-semibold text-[#3ca6ff]">8ã¤ã®è³ªå•</span>ã‚’ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚<br>
                  æ­£ç›´ã«ç­”ãˆã¦ã„ãŸã ãã“ã¨ã§ã€<br>
                  <span class="font-semibold">ã‚ãªãŸã®åŒ»é™¢ã®æ¡ç”¨åŠ›ã®ç¾åœ¨åœ°</span>ãŒ<br>
                  ã¯ã£ãã‚Šè¦‹ãˆã¦ãã¾ã™ã‚ˆã€‚
                </p>
              </div>

              <div class="mb-6 p-4 bg-blue-50 rounded-xl">
                <p class="text-sm text-gray-600">
                  <span class="font-semibold">ğŸ“Š æ‰€è¦æ™‚é–“:</span> ç´„2ã€œ3åˆ†<br>
                  <span class="font-semibold">âœ¨ è¨ºæ–­å¾Œ:</span> æ”¹å–„ãƒã‚¤ãƒ³ãƒˆã‚’å…·ä½“çš„ã«ææ¡ˆ
                </p>
              </div>

              <button 
                onclick="app.startQuestions()" 
                class="btn-primary bg-gradient-to-r from-[#3ca6ff] to-[#3ca6ff] hover:from-[#2a8fe5] hover:to-[#2a8fe5] text-white font-bold py-4 px-12 rounded-full text-lg transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl mx-auto animate-pulse-slow"
                aria-label="è¨ºæ–­ã‚’é–‹å§‹ã™ã‚‹"
              >
                è¨ºæ–­ã‚’å§‹ã‚ã‚‹ â†’
              </button>
            </div>
          </div>
        `;
      }

      // è³ªå•ç”»é¢
      renderQuestion() {
        const q = QUESTIONS[this.currentQuestion];
        const progress = ((this.currentQuestion + 1) / QUESTIONS.length) * 100;

        return `
          <div class="min-h-screen flex items-center justify-center p-4">
            <div class="max-w-3xl w-full">
              <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ -->
              <div class="mb-6 animate-fadeIn">
                <div class="flex justify-between items-center mb-2">
                  <span class="text-sm font-semibold text-gray-600">
                    è³ªå• ${this.currentQuestion + 1} / ${QUESTIONS.length}
                  </span>
                  <span class="text-sm font-semibold text-[#3ca6ff]">
                    ${Math.round(progress)}%
                  </span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
                  <div 
                    class="progress-bar h-full bg-gradient-to-r from-[#3ca6ff] to-[#f7e630] rounded-full" 
                    style="width: ${progress}%"
                    role="progressbar"
                    aria-valuenow="${Math.round(progress)}"
                    aria-valuemin="0"
                    aria-valuemax="100"
                  ></div>
                </div>
              </div>

              <!-- è³ªå•ã‚«ãƒ¼ãƒ‰ -->
              <div class="bg-white rounded-3xl shadow-2xl p-8 md:p-12 card-shadow animate-scaleIn">
                <div class="mb-6">
                  <span class="inline-block bg-gradient-to-r from-[#3ca6ff] to-[#f7e630] text-white px-6 py-2 rounded-full text-sm font-bold mb-4">
                    ${q.category}
                  </span>
                </div>

                <div class="mb-8">
                  <p class="text-sm font-semibold text-[#3ca6ff] mb-3">é½‹è—¤ã‹ã‚‰ã®è³ªå•:</p>
                  <h2 class="text-2xl md:text-3xl font-bold mb-4 leading-relaxed">
                    ${q.question}
                  </h2>
                </div>

                <!-- å›ç­”ãƒœã‚¿ãƒ³ -->
                <div class="flex flex-col sm:flex-row gap-4" role="group" aria-label="å›ç­”ã‚’é¸æŠ">
                  <button 
                    onclick="app.handleAnswer('YES')" 
                    class="btn-primary flex-1 bg-gradient-to-r from-[#3ca6ff] to-[#3ca6ff] hover:from-[#2a8fe5] hover:to-[#2a8fe5] text-white font-bold py-6 px-8 rounded-2xl text-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-3"
                    aria-label="ã¯ã„ã¨å›ç­”"
                  >
                    <span aria-hidden="true"></span> YES
                  </button>
                  <button 
                    onclick="app.handleAnswer('NO')" 
                    class="btn-primary flex-1 bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-bold py-6 px-8 rounded-2xl text-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-3"
                    aria-label="ã„ã„ãˆã¨å›ç­”"
                  >
                    <span aria-hidden="true">âš </span> NO
                  </button>
                </div>

                <!-- æˆ»ã‚‹ãƒœã‚¿ãƒ³ -->
                ${this.currentQuestion > 0 ? `
                  <button 
                    onclick="app.goBack()" 
                    class="mt-6 text-gray-600 hover:text-[#3ca6ff] font-semibold flex items-center gap-2 mx-auto transition-colors"
                    aria-label="å‰ã®è³ªå•ã«æˆ»ã‚‹"
                  >
                    â† å‰ã®è³ªå•ã«æˆ»ã‚‹
                  </button>
                ` : ''}
              </div>
            </div>
          </div>
        `;
      }

      // çµæœç”»é¢
      renderResult() {
        const issues = this.getIssues();
        const score = this.getScore();
        const scoreComment = this.getScoreComment(score);
        const adviceMessage = this.getAdviceMessage(score);

        // ã‚¹ã‚¿ãƒ¼è©•ä¾¡HTMLç”Ÿæˆ
        let starsHtml = '';
        for (let i = 0; i < 8; i++) {
          starsHtml += `<span style="--index: ${i}" class="text-3xl ${i < score ? 'text-[#f7e630]' : 'text-gray-300'}" aria-hidden="true">â˜…</span>`;
        }

        // æ”¹å–„ãƒã‚¤ãƒ³ãƒˆHTMLç”Ÿæˆ
        let issuesHtml = '';
        if (issues.length > 0) {
          issuesHtml = `
            <div class="mb-12">
              <h3 class="text-2xl font-bold mb-6 text-center">
                æ”¹å–„ãƒã‚¤ãƒ³ãƒˆ <span class="text-[#3ca6ff]">(${issues.length}å€‹)</span>
              </h3>
              <div class="space-y-6">
                ${issues.map((issue, index) => `
                  <div class="p-8 bg-gradient-to-br from-[#3ca6ff]/10 to-[#f7e630]/10 rounded-2xl border-2 border-[#3ca6ff] animate-slideIn" style="animation-delay: ${index * 0.1}s">
                    <div class="flex items-center gap-3 mb-4">
                      <span class="text-[#3ca6ff] text-2xl" aria-hidden="true">âš </span>
                      <h4 class="text-2xl font-bold">æ”¹å–„ãƒã‚¤ãƒ³ãƒˆ ${index + 1}</h4>
                    </div>
                    <div class="mb-4">
                      <span class="inline-block bg-gradient-to-r from-[#3ca6ff] to-[#f7e630] text-white px-6 py-3 rounded-full text-xl font-bold">
                        ${issue.category}
                      </span>
                    </div>
                    <p class="text-lg mb-6 font-semibold text-gray-700">${issue.question}</p>
                    
                    <div class="bg-white p-6 rounded-xl shadow-md">
                      <h5 class="text-xl font-bold text-[#3ca6ff] mb-3">choistaã§ã§ãã‚‹ã“ã¨</h5>
                      <p class="text-lg font-semibold mb-2 text-gray-800">${issue.solution.title}</p>
                      <p class="leading-relaxed text-gray-600 whitespace-pre-line">${issue.solution.description}</p>
                    </div>
                  </div>
                `).join('')}
              </div>
            </div>
          `;
        } else {
          issuesHtml = `
            <div class="text-center mb-12 p-8 bg-green-50 rounded-2xl animate-scaleIn">
              <div class="text-green-500 text-6xl mb-4" aria-hidden="true">âœ“</div>
              <h3 class="text-2xl font-bold mb-3 text-green-700">ç´ æ™´ã‚‰ã—ã„æ¡ç”¨ä½“åˆ¶ã§ã™ï¼</h3>
              <p class="text-lg text-gray-600">
                ç¾çŠ¶ã®æ¡ç”¨æ´»å‹•ã¯è‰¯å¥½ã«é‹å–¶ã•ã‚Œã¦ã„ã¾ã™ã€‚<br>
                ã•ã‚‰ãªã‚‹æ”¹å–„ã‚’ã”å¸Œæœ›ã®å ´åˆã¯ã€ãŠæ°—è»½ã«ã”ç›¸è«‡ãã ã•ã„ã€‚
              </p>
            </div>
          `;
        }

        return `
          <div class="min-h-screen p-4 py-12">
            <div class="max-w-4xl mx-auto">
              <div class="bg-white rounded-3xl shadow-2xl p-8 md:p-12 mb-8 card-shadow">
                <!-- ã‚¹ã‚³ã‚¢è¡¨ç¤º -->
                <div class="text-center mb-12 animate-fadeIn">
                  <h2 class="text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-[#3ca6ff] to-[#f7e630] bg-clip-text text-transparent">
                    è¨ºæ–­çµæœ
                  </h2>
                  
                  <div class="mb-6">
                    <div class="star-rating flex items-center justify-center gap-2 mb-4">
                      ${starsHtml}
                    </div>
                    <div class="inline-flex items-baseline gap-2">
                      <span class="text-6xl md:text-7xl font-bold text-[#3ca6ff]">${score}</span>
                      <span class="text-3xl md:text-4xl font-bold text-gray-600">/ 8ç‚¹</span>
                    </div>
                  </div>
                  
                  <p class="text-2xl font-bold mb-4 text-gray-800">${scoreComment}</p>
                </div>

                <!-- é½‹è—¤ã‹ã‚‰ã®ã‚³ãƒ¡ãƒ³ãƒˆ -->
                <div class="mb-12 p-6 bg-gradient-to-r from-blue-50 to-yellow-50 rounded-2xl border-2 border-[#3ca6ff] animate-fadeIn">
                  <p class="text-sm font-semibold text-[#3ca6ff] mb-2">é½‹è—¤ã‹ã‚‰ã®ã‚³ãƒ¡ãƒ³ãƒˆ:</p>
                  <p class="text-lg leading-relaxed text-gray-700">${adviceMessage}</p>
                </div>

                <!-- æ”¹å–„ãƒã‚¤ãƒ³ãƒˆ -->
                ${issuesHtml}

                <!-- 3Dè¦‹å­¦ä½“é¨“ -->
                <div class="mb-12 animate-fadeIn">
                  <h3 class="text-2xl font-bold mb-4 text-center">choistaã®3Dè¦‹å­¦ã‚’ä½“é¨“ã—ã¦ã¿ã¦ãã ã•ã„âœ¨</h3>
                  <p class="text-center mb-6 text-lg text-gray-600">
                    å®Ÿéš›ã«choistaã§åˆ¶ä½œã—ãŸ3Dè¦‹å­¦ãŒã©ã®ã‚ˆã†ãªã‚‚ã®ã‹ã€<br>
                    ã“ã¡ã‚‰ã‹ã‚‰ä½“é¨“ã—ã¦ã„ãŸã ã‘ã¾ã™
                  </p>
                  <div class="rounded-2xl overflow-hidden shadow-2xl iframe-container">
                    <iframe 
                      src="https://tour.vachanavi.net/tour-d77b0e9597754a94b856c2c281e7a9be" 
                      allowfullscreen 
                      allow="clipboard-write"
                      loading="lazy"
                      title="choista 3Dè¦‹å­¦ä½“é¨“"
                    ></iframe>
                  </div>
                </div>

                <!-- ç‰¹å…¸è³‡æ–™CTA -->
                <div class="mb-12 animate-fadeIn">
                  <div class="p-8 bg-gradient-to-br from-[#3ca6ff]/10 to-[#f7e630]/10 rounded-2xl border-2 border-[#3ca6ff]">
                    <h3 class="text-2xl font-bold mb-4 text-center">è¨ºæ–­çµæœã¨ç‰¹å…¸è³‡æ–™ã‚’ç„¡æ–™ã§ãŠå±Šã‘ã—ã¾ã™ï¼</h3>
                    <p class="text-center mb-6 text-lg text-gray-600">
                      ã‚ãªãŸã®è¨ºæ–­çµæœã®è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆã¨ã€<br>
                      æ¡ç”¨åŠ›å‘ä¸Šã®ãŸã‚ã®ç‰¹å…¸è³‡æ–™ã‚’ãƒ¡ãƒ¼ãƒ«ã§ãŠé€ã‚Šã—ã¾ã™
                    </p>
                    <div class="flex justify-center">
                      <a
                        href="https://docs.google.com/forms/d/e/1FAIpQLSfns94l4sDvdPhQY4QorXbtCRi77jFOoG0Mb0D1YQLGRqrSog/viewform"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="btn-primary bg-gradient-to-r from-[#f7e630] to-[#f7e630] hover:from-[#e6d520] hover:to-[#e6d520] text-white font-bold py-6 px-12 rounded-2xl text-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl no-underline inline-block"
                        aria-label="ç‰¹å…¸è³‡æ–™ã‚’å—ã‘å–ã‚‹ï¼ˆæ–°ã—ã„ã‚¿ãƒ–ã§é–‹ãã¾ã™ï¼‰"
                      >
                        ç‰¹å…¸è³‡æ–™ã‚’å—ã‘å–ã‚‹ â†’
                      </a>
                    </div>
                  </div>
                </div>

                <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
                <div class="flex flex-col sm:flex-row gap-4 animate-fadeIn">
                  <a
                    href="https://app.aitemasu.me/u/hk/muryousoudan14"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="btn-primary flex-1 bg-gradient-to-r from-[#3ca6ff] to-[#3ca6ff] hover:from-[#2a8fe5] hover:to-[#2a8fe5] text-white font-bold py-6 px-8 rounded-2xl text-xl transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center justify-center gap-3 no-underline"
                    aria-label="ç„¡æ–™ç›¸è«‡ã‚’äºˆç´„ã™ã‚‹ï¼ˆæ–°ã—ã„ã‚¿ãƒ–ã§é–‹ãã¾ã™ï¼‰"
                  >
                    ç„¡æ–™ç›¸è«‡ã‚’äºˆç´„ã™ã‚‹ â†’
                  </a>
                  <button
                    onclick="app.restart()"
                    class="sm:flex-initial bg-gray-100 hover:bg-gray-200 text-gray-800 font-bold py-6 px-8 rounded-2xl text-xl transition-all duration-300 flex items-center justify-center gap-3"
                    aria-label="ã‚‚ã†ä¸€åº¦è¨ºæ–­ã™ã‚‹"
                  >
                    <span aria-hidden="true">â†»</span> ã‚‚ã†ä¸€åº¦è¨ºæ–­
                  </button>
                </div>
              </div>

              <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
              <div class="text-center text-sm text-gray-600">
                <p>Â© choista - æ­¯ç§‘åŒ»é™¢ã®æ¡ç”¨åŠ›å‘ä¸Šã‚’æ”¯æ´</p>
              </div>
            </div>
          </div>
        `;
      }

      // ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
      render() {
        const app = document.getElementById('app');
        if (!app) return;

        try {
          if (this.stage === 'intro') {
            app.innerHTML = this.renderIntro();
          } else if (this.stage === 'questions') {
            app.innerHTML = this.renderQuestion();
          } else if (this.stage === 'result') {
            app.innerHTML = this.renderResult();
          }
          
          // ãƒšãƒ¼ã‚¸ãƒˆãƒƒãƒ—ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
          window.scrollTo({ top: 0, behavior: 'smooth' });
        } catch (error) {
          console.error('ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚¨ãƒ©ãƒ¼:', error);
          this.showError('ç”»é¢ã®è¡¨ç¤ºã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
        }
      }

      // è¨ºæ–­é–‹å§‹
      startQuestions() {
        this.stage = 'questions';
        this.currentQuestion = 0;
        this.answers = {};
        this.startTime = Date.now();
        this.render();
        
        // ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
        this.trackEvent('è¨ºæ–­é–‹å§‹', { timestamp: this.startTime });
      }

      // å›ç­”å‡¦ç†
      handleAnswer(answer) {
        this.answers[this.currentQuestion] = answer;
        
        // ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
        this.trackEvent('å›ç­”', {
          questionId: QUESTIONS[this.currentQuestion].id,
          answer: answer
        });
        
        if (this.currentQuestion < QUESTIONS.length - 1) {
          setTimeout(() => {
            this.currentQuestion++;
            this.render();
          }, 300);
        } else {
          setTimeout(() => {
            this.stage = 'result';
            const endTime = Date.now();
            const duration = Math.round((endTime - this.startTime) / 1000);
            
            // ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
            this.trackEvent('è¨ºæ–­å®Œäº†', {
              score: this.getScore(),
              duration: duration,
              issues: this.getIssues().length
            });
            
            this.render();
          }, 300);
        }
      }

      // å‰ã®è³ªå•ã«æˆ»ã‚‹
      goBack() {
        if (this.currentQuestion > 0) {
          this.currentQuestion--;
          this.render();
          
          // ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
          this.trackEvent('æˆ»ã‚‹', { questionId: this.currentQuestion });
        }
      }

      // å†è¨ºæ–­
      restart() {
        this.stage = 'intro';
        this.currentQuestion = 0;
        this.answers = {};
        this.startTime = null;
        this.render();
        
        // ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
        this.trackEvent('å†è¨ºæ–­é–‹å§‹');
      }

      // ã‚¤ãƒ™ãƒ³ãƒˆãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
      trackEvent(eventName, params = {}) {
        if (typeof gtag !== 'undefined') {
          gtag('event', eventName, params);
        }
        console.log('Event:', eventName, params);
      }
    }

    // =========================
    // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–
    // =========================
    let app;
    
    // DOMèª­ã¿è¾¼ã¿å®Œäº†å¾Œã«åˆæœŸåŒ–
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        app = new DiagnosisApp();
      });
    } else {
      app = new DiagnosisApp();
    }

    // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆï¼ˆã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ï¼‰
    document.addEventListener('keydown', (e) => {
      if (app && app.stage === 'questions') {
        if (e.key === 'y' || e.key === 'Y') {
          app.handleAnswer('YES');
        } else if (e.key === 'n' || e.key === 'N') {
          app.handleAnswer('NO');
        } else if (e.key === 'ArrowLeft' && app.currentQuestion > 0) {
          app.goBack();
        }
      }
    });
  </script>

  <!-- æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆSEOå¯¾ç­–ï¼‰ -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "æ­¯ç§‘åŒ»é™¢å‘ã‘æ¡ç”¨åŠ›ç°¡æ˜“è¨ºæ–­",
    "description": "8ã¤ã®è³ªå•ã§ã‚ãªãŸã®åŒ»é™¢ã®æ¡ç”¨åŠ›ã‚’è¨ºæ–­ã€‚æ¡ç”¨æ´»å‹•ã®èª²é¡Œã‚’è¦‹ãˆã‚‹åŒ–ã—ã€æ”¹å–„ãƒã‚¤ãƒ³ãƒˆã‚’å…·ä½“çš„ã«ææ¡ˆã—ã¾ã™ã€‚",
    "applicationCategory": "BusinessApplication",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "JPY"
    },
    "provider": {
      "@type": "Organization",
      "name": "choista",
      "url": "https://example.com"
    }
  }
  </script>
</body>
</html>
